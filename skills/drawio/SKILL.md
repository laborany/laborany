---
name: å›¾è¡¨ç»˜åˆ¶åŠ©æ‰‹
description: |
  æ™ºèƒ½å›¾è¡¨ç»˜åˆ¶åŠ©æ‰‹ï¼Œæ”¯æŒæµç¨‹å›¾ã€æ¶æ„å›¾ã€åºåˆ—å›¾ã€æ€ç»´å¯¼å›¾ç­‰å¤šç§å›¾è¡¨ç±»å‹ã€‚
  è§¦å‘åœºæ™¯:
  (1) ç”¨æˆ·éœ€è¦ç»˜åˆ¶æµç¨‹å›¾ã€æ¶æ„å›¾ã€æ€ç»´å¯¼å›¾ç­‰
  (2) ç”¨æˆ·éœ€è¦ç¼–è¾‘æˆ–ä¿®æ”¹ç°æœ‰ .drawio æ–‡ä»¶
  (3) ç”¨æˆ·è¯¢é—®"å¸®æˆ‘ç”»ä¸ªå›¾"ã€"ç”»ä¸ªæµç¨‹å›¾"ã€"æ¶æ„å›¾"
  æ”¯æŒ: æµç¨‹å›¾ã€æ¶æ„å›¾ã€åºåˆ—å›¾ã€æ€ç»´å¯¼å›¾ã€ç»„ç»‡æ¶æ„å›¾ã€ç½‘ç»œæ‹“æ‰‘å›¾ã€UMLå›¾
icon: ğŸ“
category: åŠå…¬
---

# Draw.io æ™ºèƒ½å›¾è¡¨åŠ©æ‰‹

## âš ï¸ å¼ºåˆ¶è¦æ±‚

> **å¿…é¡»ä½¿ç”¨å†…ç½®è„šæœ¬**ï¼šæœ¬ Skill ç›®å½•ä¸‹çš„ `scripts/` åŒ…å«å®Œæ•´çš„å›¾è¡¨ç”Ÿæˆå’Œå¯¼å‡ºåŠŸèƒ½ã€‚
> **ç¦æ­¢**ï¼šè‡ªå·±ç¼–å†™ XML ç”Ÿæˆä»£ç ã€è‡ªå·±ä¸‹è½½ draw.ioã€è¯¢é—®ç”¨æˆ·æ˜¯å¦å®‰è£…ã€‚
> **å¿…é¡»**ï¼šç›´æ¥ import å¹¶ä½¿ç”¨ `scripts.diagram.Diagram` å’Œ `scripts.exporter.export_png`ã€‚

```python
# æ­£ç¡®ç”¨æ³• - å¿…é¡»è¿™æ ·ä½¿ç”¨
from scripts.diagram import Diagram
from scripts.exporter import export_png

diagram = Diagram(title="æ ‡é¢˜")
diagram.add_node("n1", "èŠ‚ç‚¹1")
diagram.save("output.drawio")
export_png("output.drawio", "output.png")  # CLI è‡ªåŠ¨å®‰è£…ï¼Œæ— éœ€è¯¢é—®
```

## æ ¸å¿ƒåŸåˆ™

1. **äº”é˜¶æ®µå·¥ä½œæµ**: éœ€æ±‚ç†è§£ â†’ ç»“æ„è§„åˆ’ â†’ æ ·å¼è®¾è®¡ â†’ ç”Ÿæˆå›¾è¡¨ â†’ è¿­ä»£ä¿®æ”¹
2. **å¢é‡ä¿®æ”¹ä¼˜å…ˆ**: åªä¿®æ”¹éœ€è¦ä¿®æ”¹çš„éƒ¨åˆ†ï¼Œä¿ç•™åŸå›¾è¡¨å®Œæ•´æ€§
3. **ä¸»åŠ¨æ¾„æ¸…éœ€æ±‚**: ä¸ç¡®å®šæ—¶å…ˆé—®ï¼Œä¸è¦çŒœæµ‹ç”¨æˆ·æ„å›¾
4. **ç­‰å¾…ç”¨æˆ·å›ç­”**: ä½¿ç”¨ AskUserQuestion åå¿…é¡»åœæ­¢ç­‰å¾…ï¼Œ**ç»å¯¹ç¦æ­¢è‡ªå·±å‡è®¾ç­”æ¡ˆç»§ç»­æ‰§è¡Œ**

---

## ä»»åŠ¡è¯†åˆ«ä¸è·¯ç”±

### åˆ›å»ºæ–°å›¾è¡¨
ä½¿ç”¨ **Diagram ç±»** (Python)ï¼Œå‚è€ƒ [`references/xml-format.md`](references/xml-format.md)

### ç¼–è¾‘ç°æœ‰å›¾è¡¨
åŠ è½½ .drawio æ–‡ä»¶ â†’ ä½¿ç”¨ Diagram ç±»ä¿®æ”¹ â†’ å¯¼å‡º

### å¯¼å‡ºå›¾ç‰‡
ä½¿ç”¨ **exporter.py** è°ƒç”¨ draw.io CLI å¯¼å‡º PNG/SVG

---

## äº”é˜¶æ®µå·¥ä½œæµ

### é˜¶æ®µä¸€ï¼šéœ€æ±‚ç†è§£

åœ¨å¼€å§‹ä»»ä½•æ“ä½œå‰ï¼Œå¿…é¡»ï¼š

**1. è¯†åˆ«ä»»åŠ¡ç±»å‹**
- åˆ›å»ºæ–°å›¾è¡¨
- ç¼–è¾‘ç°æœ‰å›¾è¡¨
- å¯¼å‡ºå›¾ç‰‡

**2. ä¸»åŠ¨æ¾„æ¸…ä¸æ˜ç¡®çš„éœ€æ±‚**

> **é‡è¦**: å½“éœ€æ±‚ä¸å¤Ÿæ˜ç¡®æ—¶ï¼Œ**å¿…é¡»ä½¿ç”¨ AskUserQuestion å·¥å…·**è¯¢é—®ç”¨æˆ·ï¼Œå¹¶**ç­‰å¾…ç”¨æˆ·å›ç­”åæ‰èƒ½ç»§ç»­**ã€‚
> **ç¦æ­¢**: è‡ªå·±å‡è®¾ç”¨æˆ·çš„å›ç­”ç„¶åç»§ç»­æ‰§è¡Œã€‚

å¯¹äº**åˆ›å»ºæ–°å›¾è¡¨**ä»»åŠ¡ï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰æ˜ç¡®æŒ‡å®šï¼Œå¿…é¡»è¯¢é—®ï¼š

```
ä½¿ç”¨ AskUserQuestion å·¥å…·è¯¢é—®ä»¥ä¸‹é—®é¢˜ï¼š

é—®é¢˜1: å›¾è¡¨ç±»å‹æ˜¯ä»€ä¹ˆï¼Ÿ
- é€‰é¡¹: æµç¨‹å›¾ / æ¶æ„å›¾ / åºåˆ—å›¾ / æ€ç»´å¯¼å›¾ / å…¶ä»–

é—®é¢˜2: å›¾è¡¨å¤æ‚åº¦ï¼Ÿ
- é€‰é¡¹: ç®€å•ï¼ˆ5-10ä¸ªèŠ‚ç‚¹ï¼‰/ ä¸­ç­‰ï¼ˆ10-20ä¸ªèŠ‚ç‚¹ï¼‰/ å¤æ‚ï¼ˆ20ä¸ªä»¥ä¸Šï¼‰

é—®é¢˜3: è§†è§‰é£æ ¼åå¥½ï¼Ÿ
- é€‰é¡¹: å•†åŠ¡ç®€çº¦ / æŠ€æœ¯è“å›¾ / æç®€é»‘ç™½ / å¤šå½©æ´»æ³¼
```

**è°ƒç”¨ AskUserQuestion åï¼Œå¿…é¡»åœæ­¢å¹¶ç­‰å¾…ç”¨æˆ·å›ç­”ã€‚ç»å¯¹ä¸èƒ½è‡ªå·±å‡è®¾ç­”æ¡ˆç»§ç»­æ‰§è¡Œã€‚**

### é˜¶æ®µäºŒï¼šç»“æ„è§„åˆ’

**1. ç”Ÿæˆå›¾è¡¨ç»“æ„å¤§çº²**

```markdown
## å›¾è¡¨å¤§çº²

### èŠ‚ç‚¹åˆ—è¡¨
1. [èŠ‚ç‚¹1] - [æè¿°]
2. [èŠ‚ç‚¹2] - [æè¿°]
...

### è¿æ¥å…³ç³»
- [èŠ‚ç‚¹1] â†’ [èŠ‚ç‚¹2]: [å…³ç³»æè¿°]
- [èŠ‚ç‚¹2] â†’ [èŠ‚ç‚¹3]: [å…³ç³»æè¿°]
...

### åˆ†ç»„ï¼ˆå¦‚æœ‰ï¼‰
- [ç»„å]: åŒ…å« [èŠ‚ç‚¹åˆ—è¡¨]
```

**2. ç­‰å¾…ç”¨æˆ·ç¡®è®¤**

ä½¿ç”¨ AskUserQuestion å·¥å…·è¯¢é—®ï¼š
```
é—®é¢˜: å¤§çº²æ˜¯å¦ç¬¦åˆæ‚¨çš„é¢„æœŸï¼Ÿ
- é€‰é¡¹: ç¡®è®¤ï¼Œå¼€å§‹è®¾è®¡ / éœ€è¦è°ƒæ•´å¤§çº² / æ·»åŠ æ›´å¤šå†…å®¹
```

### é˜¶æ®µä¸‰ï¼šæ ·å¼è®¾è®¡

**1. é€‰æ‹©/åº”ç”¨ä¸»é¢˜**

å¯ç”¨é¢„è®¾ä¸»é¢˜ï¼š
- `default.json` - é»˜è®¤ä¸»é¢˜ï¼ˆè“è‰²ç³»ï¼Œä¸“ä¸šé£æ ¼ï¼‰
- `blueprint.json` - è“å›¾ä¸»é¢˜ï¼ˆæ·±è“é…è‰²ï¼ŒæŠ€æœ¯é£æ ¼ï¼‰
- `minimal.json` - æç®€ä¸»é¢˜ï¼ˆé»‘ç™½é…è‰²ï¼Œç®€æ´é£æ ¼ï¼‰
- `colorful.json` - å¤šå½©ä¸»é¢˜ï¼ˆæ´»æ³¼é…è‰²ï¼Œç°ä»£é£æ ¼ï¼‰

**2. è§„åˆ’å¸ƒå±€**

å¸ƒå±€æ–¹å‘é€‰æ‹©ï¼š
- `TB` - ä»ä¸Šåˆ°ä¸‹ï¼ˆTop to Bottomï¼‰
- `LR` - ä»å·¦åˆ°å³ï¼ˆLeft to Rightï¼‰
- `BT` - ä»ä¸‹åˆ°ä¸Šï¼ˆBottom to Topï¼‰
- `RL` - ä»å³åˆ°å·¦ï¼ˆRight to Leftï¼‰

### é˜¶æ®µå››ï¼šç”Ÿæˆå›¾è¡¨

**1. åˆ›å»º Diagram å®ä¾‹**

```python
from scripts.diagram import Diagram

diagram = Diagram(title="å›¾è¡¨æ ‡é¢˜", theme="default")
```

**2. æ·»åŠ èŠ‚ç‚¹å’Œè¿çº¿**

```python
# æ·»åŠ èŠ‚ç‚¹
diagram.add_node("n1", "å¼€å§‹", shape="ellipse")
diagram.add_node("n2", "å¤„ç†", shape="rectangle")
diagram.add_node("n3", "åˆ¤æ–­", shape="rhombus")

# æ·»åŠ è¿çº¿
diagram.add_edge("n1", "n2", label="")
diagram.add_edge("n2", "n3", label="")
```

**3. è‡ªåŠ¨å¸ƒå±€**

```python
diagram.auto_layout(direction="TB", spacing=(80, 60))
```

**4. ä¿å­˜å¹¶è‡ªåŠ¨å¯¼å‡º PNG**

> **é‡è¦**: ç”Ÿæˆ .drawio æ–‡ä»¶åï¼Œ**å¿…é¡»è‡ªåŠ¨å¯¼å‡º PNG é¢„è§ˆ**ï¼Œæ— éœ€è¯¢é—®ç”¨æˆ·ã€‚
> draw.io CLI ä¼šè‡ªåŠ¨å®‰è£…ï¼Œ**ä¸éœ€è¦è¯¢é—®ç”¨æˆ·æ˜¯å¦å®‰è£…**ã€‚

```python
# ä¿å­˜ .drawio æ–‡ä»¶
diagram.save("output.drawio")

# è‡ªåŠ¨å¯¼å‡º PNG é¢„è§ˆï¼ˆCLI ä¼šè‡ªåŠ¨å®‰è£…ï¼Œæ— éœ€ç”¨æˆ·ç¡®è®¤ï¼‰
from scripts.exporter import export_png
success = export_png("output.drawio", "output.png")
if not success:
    # å¦‚æœå¯¼å‡ºå¤±è´¥ï¼Œä»…æä¾› .drawio æ–‡ä»¶ä¸‹è½½
    print("PNG å¯¼å‡ºå¤±è´¥ï¼Œè¯·ä¸‹è½½ .drawio æ–‡ä»¶ç”¨ draw.io æ‰“å¼€")
```

**è‡ªåŠ¨åŒ–æµç¨‹è¦æ±‚**ï¼š
- ç”Ÿæˆå›¾è¡¨åå¿…é¡»è‡ªåŠ¨å°è¯•å¯¼å‡º PNG
- draw.io CLI å®‰è£…è¿‡ç¨‹å®Œå…¨é™é»˜ï¼Œä¸è¯¢é—®ç”¨æˆ·
- åªæœ‰åœ¨å®‰è£…/å¯¼å‡ºéƒ½å¤±è´¥æ—¶æ‰å‘ŠçŸ¥ç”¨æˆ·

### é˜¶æ®µäº”ï¼šè¿­ä»£ä¿®æ”¹

**1. æ¥æ”¶ç”¨æˆ·åé¦ˆ**

**2. å®šä½ä¿®æ”¹ä½ç½®**
- ä½¿ç”¨èŠ‚ç‚¹ ID
- ä½¿ç”¨èŠ‚ç‚¹æ ‡ç­¾æœç´¢
- ä½¿ç”¨è¿çº¿ ID

**3. å¢é‡æ›´æ–°**

```python
# ä¿®æ”¹èŠ‚ç‚¹
diagram.update_node("n2", label="æ•°æ®å¤„ç†")

# åˆ é™¤è¿çº¿
diagram.remove_edge("e1")

# æ·»åŠ æ–°è¿çº¿
diagram.add_edge("n2", "n3", label="æ–°è¿çº¿")
```

**4. ç”Ÿæˆä¿®æ”¹æ‘˜è¦**

```markdown
## ä¿®æ”¹æ‘˜è¦

æœ¬æ¬¡ä¿®æ”¹å…±æ¶‰åŠ N å¤„å˜æ›´ï¼š

### èŠ‚ç‚¹ä¿®æ”¹
1. **èŠ‚ç‚¹ [ID]**: "[åŸæ ‡ç­¾]" â†’ "[æ–°æ ‡ç­¾]"

### è¿çº¿ä¿®æ”¹
1. **è¿çº¿ [ID]**: åˆ é™¤

### æ–°å¢å†…å®¹
1. **èŠ‚ç‚¹ [ID]**: æ–°å¢ "[æ ‡ç­¾]"
```

**5. è¯¢é—®åç»­éœ€æ±‚**

ä½¿ç”¨ AskUserQuestion å·¥å…·è¯¢é—®ï¼š
```
é—®é¢˜: æ¥ä¸‹æ¥æ‚¨æƒ³ï¼Ÿ
- é€‰é¡¹: ç»§ç»­ä¿®æ”¹å…¶ä»–éƒ¨åˆ† / è°ƒæ•´åˆšæ‰çš„ä¿®æ”¹ / ç¡®è®¤å®Œæˆï¼Œä¸‹è½½æ–‡ä»¶
```

---

## æŠ€æœ¯å®ç°ç»†èŠ‚

### åˆ›å»ºæ–°å›¾è¡¨

> **å¼ºåˆ¶**ï¼šå¿…é¡»ä½¿ç”¨ `scripts/diagram.py` ä¸­çš„ Diagram ç±»ï¼Œç¦æ­¢è‡ªå·±ç”Ÿæˆ XMLã€‚

ä½¿ç”¨ **Diagram ç±»** åˆ›å»ºæ–°å›¾è¡¨ã€‚

**Workflow**
1. Import: `from scripts.diagram import Diagram`
2. Create diagram and add nodes/edges
3. Save: `diagram.save("output.drawio")`
4. Export PNG: `from scripts.exporter import export_png; export_png("output.drawio", "output.png")`

### ç¼–è¾‘ç°æœ‰å›¾è¡¨

ä½¿ç”¨ **Diagram.load()** åŠ è½½ç°æœ‰å›¾è¡¨ã€‚

**Workflow**
1. Load the diagram: `diagram = Diagram.load("input.drawio")`
2. Modify using Diagram API
3. Save and export

### å¯¼å‡ºå›¾ç‰‡

> **å¼ºåˆ¶**ï¼šå¿…é¡»ä½¿ç”¨ `scripts/exporter.py`ï¼Œç¦æ­¢è‡ªå·±ä¸‹è½½æˆ–å®‰è£… draw.io CLIã€‚
> CLI å®‰è£…æ˜¯**å®Œå…¨è‡ªåŠ¨åŒ–**çš„ï¼Œ**ç¦æ­¢è¯¢é—®ç”¨æˆ·**ã€‚

**Workflow**
1. Import: `from scripts.exporter import export_png`
2. Export: `export_png("input.drawio", "output.png", scale=2)`
3. å¦‚æœå¯¼å‡ºå¤±è´¥ï¼Œé™é»˜é™çº§ä¸ºä»…æä¾› .drawio æ–‡ä»¶

---

## å›¾è¡¨ç±»å‹æŒ‡å—

| ç±»å‹ | è¯´æ˜ | å…¸å‹èŠ‚ç‚¹å½¢çŠ¶ | å¸ƒå±€æ–¹å‘ |
|------|------|-------------|---------|
| æµç¨‹å›¾ | ä¸šåŠ¡æµç¨‹ã€ç®—æ³•æµç¨‹ | çŸ©å½¢ã€è±å½¢ã€æ¤­åœ† | TB |
| æ¶æ„å›¾ | ç³»ç»Ÿæ¶æ„ã€æŠ€æœ¯æ ˆ | çŸ©å½¢ã€åœ†è§’çŸ©å½¢ | TB/LR |
| åºåˆ—å›¾ | æ—¶åºäº¤äº’ã€æ¶ˆæ¯æµ | çŸ©å½¢ã€ç”Ÿå‘½çº¿ | TB |
| æ€ç»´å¯¼å›¾ | æ¦‚å¿µå‘æ•£ã€çŸ¥è¯†æ•´ç† | åœ†è§’çŸ©å½¢ | LR |
| ç»„ç»‡æ¶æ„å›¾ | äººå‘˜å±‚çº§ã€éƒ¨é—¨ç»“æ„ | çŸ©å½¢ | TB |
| ç½‘ç»œæ‹“æ‰‘å›¾ | ç½‘ç»œè®¾å¤‡ã€è¿æ¥å…³ç³» | å›¾æ ‡ã€çŸ©å½¢ | è‡ªç”± |

---

## èŠ‚ç‚¹å½¢çŠ¶å‚è€ƒ

| å½¢çŠ¶ | shape å€¼ | é€‚ç”¨åœºæ™¯ |
|------|----------|---------|
| çŸ©å½¢ | rectangle | å¤„ç†æ­¥éª¤ã€æ¨¡å— |
| åœ†è§’çŸ©å½¢ | rounded | é€šç”¨èŠ‚ç‚¹ |
| æ¤­åœ† | ellipse | å¼€å§‹/ç»“æŸ |
| è±å½¢ | rhombus | åˆ¤æ–­/å†³ç­– |
| å¹³è¡Œå››è¾¹å½¢ | parallelogram | è¾“å…¥/è¾“å‡º |
| åœ†æŸ± | cylinder | æ•°æ®åº“ |
| å…­è¾¹å½¢ | hexagon | å‡†å¤‡æ­¥éª¤ |
| äº‘å½¢ | cloud | äº‘æœåŠ¡ |

---

## ä¾èµ–

```bash
# Python
pip install defusedxml lxml

# draw.io CLIï¼ˆè‡ªåŠ¨å®‰è£…ï¼‰
# Windows: portable exe
# Linux: AppImage
# macOS: /Applications/draw.io.app
```

---

## Code Style Guidelines

- Write concise code
- Avoid verbose variable names and redundant operations
- Avoid unnecessary print statements
- ä¸­æ–‡æ³¨é‡Šï¼ŒASCII é£æ ¼åˆ†å—
